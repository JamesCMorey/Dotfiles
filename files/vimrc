call plug#begin()

Plug 'vimwiki/vimwiki'
Plug 'preservim/vim-markdown'
Plug 'vim/colorschemes'
" https://castel.dev/post/lecture-notes-1/#latex-snippets
" Plug 'lervag/vimtex'

Plug 'junegunn/fzf', { 'do': { -> fzf#install() } }
Plug 'junegunn/fzf.vim'

Plug 'preservim/nerdtree'
Plug 'bling/vim-bufferline'

call plug#end()

let g:vimwiki_list = [{'path': '~/archive',
                       \ 'syntax': 'default',
                       \ 'ext': '.md'}]

syntax on
set t_Co=256
colorscheme habamax
set cursorline
set nu rnu
set ruler

set tags+=./tags;/
set nocompatible

set enc=utf-8
set fenc=utf-8
set termencoding=utf-8

"filetype plugin indent off
"set smartindent
"set autoindent
set tabstop=8
set shiftwidth=8

set textwidth=80
set colorcolumn=81
set nospell
set tabpagemax=20

let mapleader = ' '

" Open the existing NERDTree on each new tab.
autocmd BufWinEnter * if &buftype != 'quickfix' && getcmdwintype() == '' | silent NERDTreeMirror | endif
nnoremap <leader>t :NERDTreeFocus<CR>
nnoremap <C-n> :NERDTree<CR>
nnoremap <C-t> :NERDTreeToggle<CR>
nnoremap <C-f> :NERDTreeFind<CR>

" Window Navigation
nnoremap <leader>g <C-W>w

" Buffer Navigation
nnoremap <leader>n :bn<CR>
nnoremap <leader>p :bp<CR>
nnoremap <leader>d :bd<CR>
nnoremap <leader>m :w<CR>:Buffers<CR>
nnoremap <leader>f :w<CR>:Files<CR>

" Misc Remaps
nnoremap <leader>s :source ~/.vimrc<CR>
inoremap kj <ESC>
inoremap {<CR> {<CR>}<esc>O

set backup
set backupdir=~/.vim/backup//

set undofile
set undodir=~/.vim/undodir//

set directory=~/.vim/swp//

"let g:tex_flavor='latex'
"let g:vimtex_view_method='zathura'
"let g:vimtex_quickfix_mode=0
"set conceallevel=1
"let g:tex_conceal='abdmg'

" trailing whitespaces
" autocmd BufWinEnter <buffer> match Error /\s\+$/
" autocmd InsertEnter <buffer> match Error /\s\+\%#\@<!$/
" autocmd InsertLeave <buffer> match Error /\s\+$/
" autocmd BufWinLeave <buffer> call clearmatches()

highlight ExtraWhitespace ctermbg=red guibg=red
match ExtraWhitespace /\s\+$/
autocmd BufWinEnter * match ExtraWhitespace /\s\+$/
autocmd InsertEnter * match ExtraWhitespace /\s\+\%#\@<!$/
autocmd InsertLeave * match ExtraWhitespace /\s\+$/
autocmd BufWinLeave * call clearmatches()


" delete trailing whitespace
autocmd BufWritePre * :%s/\s\+$//e
